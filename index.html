<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Truth or Dare â¤ï¸</title>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<style>
body {
  font-family: Arial, sans-serif;
  text-align: center;
  background: linear-gradient(135deg, #ff758c, #ff7eb3);
  color: white;
  margin: 0;
  padding: 0;
}

h1 {
  margin-top: 20px;
}

.container {
  margin-top: 30px;
  position: relative;
  display: inline-block;
}

.arrow {
  width: 0;
  height: 0;
  border-left: 20px solid transparent;
  border-right: 20px solid transparent;
  border-bottom: 40px solid white;
  margin: 0 auto;
}

canvas {
  background: white;
  border-radius: 50%;
}

button {
  padding: 12px 25px;
  margin-top: 20px;
  font-size: 18px;
  border: none;
  border-radius: 10px;
  background: white;
  color: #ff4e88;
  cursor: pointer;
  font-weight: bold;
}

#result {
  margin-top: 20px;
  font-size: 20px;
  font-weight: bold;
  min-height: 50px;
}
</style>
</head>

<body>

<h1>Truth or Dare ğŸ’•</h1>

<div class="container">
  <div class="arrow"></div>
  <canvas id="wheel" width="400" height="400"></canvas>
</div>

<br>
<button onclick="spin()">Spin ğŸ’«</button>

<div id="result"></div>

<script>
/* ğŸ”¥ Firebase Config */
const firebaseConfig = {
  apiKey: "AIzaSyDRKxX4m8PPPev4vHhYh9x5fSSaUmQIzO0",
  authDomain: "game-c4cb2.firebaseapp.com",
  databaseURL: "https://game-c4cb2-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "game-c4cb2",
  storageBucket: "game-c4cb2.firebasestorage.app",
  messagingSenderId: "413339168960",
  appId: "1:413339168960:web:5722729cb4e41ccb2abd25"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

/* ğŸ’• Questions */
const truths = [
"Who was your first crush?",
"What is your biggest fear?",
"Have you ever lied to me?",
"What is your biggest insecurity?",
"What is your secret fantasy?",
"What do you love most about me?",
"Have you ever stalked someone online?",
"What is your most embarrassing moment?",
"What is something you never told anyone?",
"When did you first start liking me?",
"What is your guilty pleasure?",
"If you could change one thing about me what would it be?"
];

const dares = [
"Send me a voice note saying I love you.",
"Do your cutest dance and send video.",
"Call me and sing a romantic song.",
"Change your DP to my picture for 1 day.",
"Write my name on your hand and send pic.",
"Send me your funniest selfie.",
"Say something spicy about me.",
"Tell me why I am your favorite person.",
"Act jealous for 1 minute.",
"Send a heart emoji every minute for 5 minutes.",
"Blow me a flying kiss on video.",
"Say my name in your cutest voice."
];

const options = ["Truth ğŸ’–", "Dare ğŸ”¥"];

const canvas = document.getElementById("wheel");
const ctx = canvas.getContext("2d");
const size = canvas.width;
const radius = size / 2;
let rotation = 0;

function drawWheel() {
  const arc = Math.PI * 2 / options.length;
  ctx.clearRect(0, 0, size, size);

  for (let i = 0; i < options.length; i++) {
    ctx.beginPath();
    ctx.fillStyle = i % 2 === 0 ? "#ff758c" : "#ff4e88";
    ctx.moveTo(radius, radius);
    ctx.arc(radius, radius, radius, i * arc, (i + 1) * arc);
    ctx.fill();

    ctx.save();
    ctx.translate(radius, radius);
    ctx.rotate(i * arc + arc / 2);
    ctx.textAlign = "right";
    ctx.fillStyle = "white";
    ctx.font = "bold 20px Arial";
    ctx.fillText(options[i], radius - 20, 10);
    ctx.restore();
  }
}

drawWheel();

function spin() {
  const spinAngle = Math.floor(Math.random() * 360 + 720);
  rotation += spinAngle;

  canvas.style.transition = "transform 4s ease-out";
  canvas.style.transform = "rotate(" + rotation + "deg)";

  setTimeout(() => {
    const actualDeg = rotation % 360;
    const index = Math.floor((360 - actualDeg) / (360 / options.length)) % options.length;
    showResult(options[index]);
  }, 4000);
}

function showResult(type) {
  let question;

  if (type.includes("Truth")) {
    question = truths[Math.floor(Math.random() * truths.length)];
  } else {
    question = dares[Math.floor(Math.random() * dares.length)];
  }

  document.getElementById("result").innerText = question;
  db.ref("game").set({ question: question });
}

db.ref("game").on("value", snapshot => {
  const data = snapshot.val();
  if (data) {
    document.getElementById("result").innerText = data.question;
  }
});
</script>

</body>
</html>
